<!-- /me310/3.16.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Eq. 3.16: velocity measurement by the Pitot-static tube</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="../styles.css" />
  <script>window.MathJax={chtml:{scale:0.9},options:{renderActions:{addMenu:[]}}}</script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    /* Header (match Moody/Isentropic) */
    .site-header .container{padding-top:20px;padding-bottom:20px}
    .header-row{display:flex;align-items:center;justify-content:space-between;gap:14px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid #ffffff55;
         background:rgba(255,255,255,.12);color:#fff;text-decoration:none}
    .btn.primary{background:var(--accent);border-color:transparent}
    .btn.primary:hover{filter:brightness(1.06)}

    /* Two-column top */
    .top-grid{display:grid;gap:12px}
    @media (min-width:1024px){ .top-grid{grid-template-columns:1.5fr .9fr} }

    .ctl{background:#fff;border:1px solid var(--line);border-radius:12px;padding:12px}
    .eqwrap{padding:12px;border:1px dashed var(--line);border-radius:12px;background:#fcfcff}
    .eqbig{font-size:1.02em;margin-top:2px}
    .note.title-xl{font-size:16px;line-height:1.15}

    .symgrid{display:grid;grid-template-columns:1fr 1fr;gap:4px 28px;margin-top:8px}
    .symgrid ul{margin:0 0 0 20px;padding:0}

    /* Inputs */
    .controls{display:grid;gap:12px}
    .rowflex{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
    .num-sm{width:170px}
    .controls input.num-sm[type="number"]{width:170px !important}
    .inline{display:flex;align-items:center;gap:8px}
    .hint{font-size:12px;color:#6b7280;margin-top:4px}

    /* KPIs (small numbers to de-emphasize) */
    .kpi{display:grid;gap:10px;margin-top:10px;grid-template-columns:repeat(2,minmax(120px,1fr))}
    .kpi .lab{font-size:12px;color:#555}
    .kpi .val{font-size:16px;font-weight:600}

    /* Schematic placeholder */
    .schem{height:260px;border:2px dashed var(--line);border-radius:12px;background:#fafcff;
           display:flex;align-items:center;justify-content:center;color:#64748b}
    .schem small{display:block;margin-top:6px;color:#94a3b8}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <div class="header-row">
        <h1 style="margin:0">Eq. 3.16: velocity measurement by the Pitot-static tube</h1>
        <a class="btn primary feedback-link" href="../feedback.html" target="_blank" rel="noopener">Send feedback</a>
      </div>
    </div>
  </header>

  <main class="container">
    <nav class="back-row">
      <a href="../index.html" class="back-home" aria-label="Back to home"><span class="chev">‚Üê</span> Home</a>
    </nav>

    <!-- Equations + Inputs -->
    <section class="top-grid">
      <!-- Equations + Symbols -->
      <div class="ctl">
        <div class="eqwrap">
          <div class="note title-xl" style="margin-bottom:10px"><b>Velocity from Pitot‚Äìstatic pressure difference (incompressible)</b></div>

          <div class="eqbig">
            \( \displaystyle
              V \;=\; \sqrt{\frac{2\,\Delta p}{\rho}}
              \quad\text{with}\quad \Delta p = p_0 - p.
            \)
          </div>

          <div class="eqbig" style="margin-top:8px">
            \( \displaystyle
              \text{(Demo link)}\quad
              \Delta p =
              \begin{cases}
                (\rho_m - \rho)\,g\,h, & \text{general manometer}\\[4px]
                \rho_m\,g\,h, & \text{air with dense manometer fluid}
              \end{cases}
            \)
          </div>

          <div class="note" style="margin-top:10px">
            <b>Symbols</b>
            <div class="symgrid">
              <ul>
                <li><b>V</b> ‚Äî local flow speed (m¬∑s\(^{-1}\))</li>
                <li><b>p‚ÇÄ</b> ‚Äî stagnation (total) pressure (Pa)</li>
                <li><b>p</b> ‚Äî static pressure (Pa)</li>
                <li><b>Œîp</b> ‚Äî \(p_0 - p\) (Pa)</li>
              </ul>
              <ul>
                <li><b>œÅ</b> ‚Äî working-fluid density (kg¬∑m\(^{-3}\))</li>
                <li><b>œÅ‚Çò</b> ‚Äî manometer fluid density (kg¬∑m\(^{-3}\))</li>
                <li><b>h</b> ‚Äî manometer level difference (m)</li>
                <li><b>g</b> ‚Äî local gravitational acceleration (m¬∑s\(^{-2}\))</li>
              </ul>
            </div>
            <div style="margin-top:8px">
              Assumptions used here: \( \mathrm{Ma} < 0.3 \) (incompressible), steady flow, and negligible elevation difference between ports along the streamline into the Pitot opening.
            </div>
          </div>
        </div>

        <!-- Schematic placeholder -->
        <div class="schem" style="margin-top:12px">
          <div style="text-align:center">
            <div>üìê Schematic placeholder ‚Äî Pitot tip (stagnation) + static port ‚Üí manometer</div>
            <small>(replace with your own course figure later)</small>
          </div>
        </div>
      </div>

      <!-- Controls / Readout -->
      <div class="ctl">
        <div class="controls">
          <!-- Air properties from standard atmosphere table -->
          <div>
            <label>Air properties (standard atmosphere, 20 ¬∞C)</label>
            <div class="rowflex">
              <select id="atm" aria-label="standard atmosphere altitude">
                <option value="custom" selected>Custom‚Ä¶</option>
                <option value="0">Sea level (0 m)</option>
                <option value="5000">5,000 m</option>
                <option value="10000">10,000 m</option>
                <option value="15000">15,000 m</option>
                <option value="20000">20,000 m</option>
                <option value="25000">25,000 m</option>
                <option value="30000">30,000 m</option>
                <option value="40000">40,000 m</option>
                <option value="50000">50,000 m</option>
                <option value="60000">60,000 m</option>
                <option value="70000">70,000 m</option>
                <option value="80000">80,000 m</option>
              </select>
              <span id="atmBadge" class="badge" aria-live="polite">g = 9.81, œÅ = 1.20</span>
            </div>
            <div class="hint">Choose a standard-atmosphere altitude <i>or</i> select <b>Custom‚Ä¶</b> to enter œÅ yourself. When an altitude is selected, œÅ and g are taken from the table.</div>
          </div>

          <!-- Working fluid density (editable only in Custom mode) -->
          <div>
            <label>Working-fluid density, œÅ (kg/m¬≥)</label>
            <input id="rho" class="num-sm" type="number" min="0.1" step="0.1" value="1.20" />
          </div>

          <!-- Primary exploration: Œîp slider + input -->
          <div>
            <label>Pressure difference, Œîp (Pa)</label>
            <input id="dp" class="num-sm" type="number" min="0" step="10" value="100" />
            <input id="dpRange" type="range" min="0" max="5000" step="10" value="100" />
          </div>

          <!-- Optional manometer demo -->
          <details class="demo">
            <summary class="note">Show manometer relation (demo)</summary>
            <div class="rowflex" style="margin-top:8px">
              <div>
                <label>h (m)</label>
                <input id="h" class="num-sm" type="number" min="0" step="0.001" value="0.010" />
              </div>
              <div>
                <label>Manometer œÅ‚Çò (kg/m¬≥)</label>
                <input id="rhoM" class="num-sm" type="number" min="500" step="10" value="13595" />
              </div>
              <div class="inline">
                <label class="inline"><input type="radio" name="manomode" value="general" checked /> \((\rho_m-\rho)gh\)</label>
                <label class="inline"><input type="radio" name="manomode" value="airwater" /> \(\rho_m g h\)</label>
              </div>
              <button id="useMano" type="button" class="btn">Set Œîp from manometer</button>
            </div>
          </details>

          <!-- Readout (kept low precision) -->
          <div>
            <label>Current values</label>
            <div class="kpi">
              <div><div class="lab">V (m/s)</div><div id="kpi_V" class="val">‚Äî</div></div>
              <div><div class="lab">Œîp (Pa)</div><div id="kpi_dp" class="val">‚Äî</div></div>
              <div><div class="lab">q = ¬ΩœÅV¬≤ (Pa)</div><div id="kpi_q" class="val">‚Äî</div></div>
              <div><div class="lab">g (m/s¬≤)</div><div id="kpi_g" class="val">‚Äî</div></div>
            </div>
          </div>

          <p class="note" style="margin:0">
            Use of the standard-atmosphere presets is for **context**; this page is for concept exploration, not a solver.
          </p>
        </div>
      </div>
    </section>

    <section class="card" style="margin-top:12px">
      <div class="note">
        Explore how \(V\propto\sqrt{\Delta p}\). For the same Œîp, higher-density fluids yield lower speeds.
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <a href="../index.html" class="back-home"><span class="chev">‚Üê</span> Home</a>
    </div>
  </footer>

  <script>
    // --------- standard atmosphere subset (from your table) ----------
    // Altitude in meters ‚Üí { rho (kg/m^3), g (m/s^2) }
    const ATM = {
      0:     { rho: 1.225,  g: 9.807 },
      5000:  { rho: 0.7364, g: 9.791 },
      10000: { rho: 0.4135, g: 9.775 },
      15000: { rho: 0.1948, g: 9.761 },
      20000: { rho: 0.08891,g: 9.745 },
      25000: { rho: 0.04008,g: 9.730 },
      30000: { rho: 0.01841,g: 9.715 },
      40000: { rho: 0.003996,g: 9.684 },
      50000: { rho: 0.003097,g: 9.654 },
      60000: { rho: 0.001846,g: 9.624 },
      70000: { rho: 0.0008283,g: 9.594 },
      80000: { rho: 0.0001846,g: 9.564 }
    };

    // ---------- helpers ----------
    const $ = id => document.getElementById(id);
    function valNum(el, fb){ const v = parseFloat(el.value); return Number.isFinite(v) ? v : fb; }
    function clamp(v, lo, hi){ return Math.min(hi, Math.max(lo, v)); }

    // state derived from preset/custom selection
    let g_local = 9.81;

    function setAtmosphereMode(){
      const sel = $('atm').value;
      const isCustom = (sel === 'custom');
      $('rho').disabled = !isCustom;

      if (!isCustom && ATM[sel]){
        $('rho').value = ATM[sel].rho.toString();
        g_local = ATM[sel].g;
      } else {
        g_local = 9.81;
      }

      // badge + KPI g
      const rhoNow = parseFloat($('rho').value);
      $('atmBadge').textContent = `g = ${g_local.toFixed(3)}, œÅ = ${Number.isFinite(rhoNow)?rhoNow.toFixed(3):'‚Äî'}`;
      $('kpi_g').textContent = g_local.toFixed(3);

      compute();
    }

    function currentRho(){
      return clamp(valNum($('rho'), 1.2), 0.1, 20000);
    }
    function currentDp(){ return clamp(valNum($('dp'), 0), 0, 1e6); }

    function compute(){
      const rho = currentRho();
      const dp  = currentDp();
      const V   = (rho>0) ? Math.sqrt((2*dp)/rho) : NaN;
      const q   = 0.5*rho*(V*V);

      $('kpi_V').textContent  = Number.isFinite(V) ? V.toFixed(2) : '‚Äî';
      $('kpi_dp').textContent = Number.isFinite(dp)? Math.round(dp) : '‚Äî';
      $('kpi_q').textContent  = Number.isFinite(q) ? Math.round(q) : '‚Äî';
      $('kpi_g').textContent  = g_local.toFixed(3);
    }

    function setDp(v){
      const dp = clamp(v, 0, 5000);
      $('dp').value = dp;
      $('dpRange').value = dp;
      compute();
    }

    function useManometer(){
      const h    = clamp(valNum($('h'), 0), 0, 100);
      const rhoM = clamp(valNum($('rhoM'), 13595), 1, 40000);
      const rho  = currentRho();
      const mode = [...document.querySelectorAll('input[name="manomode"]')].find(r=>r.checked)?.value || 'general';
      const dp   = (mode==='airwater') ? rhoM*g_local*h : Math.max(0, (rhoM - rho)*g_local*h);
      setDp(dp);
    }

    function wire(){
      $('atm').addEventListener('change', setAtmosphereMode);
      $('rho').addEventListener('input', ()=>{ if (!$('rho').disabled) setAtmosphereMode(); });

      $('dp').addEventListener('input', (e)=> setDp(parseFloat(e.target.value)||0));
      $('dpRange').addEventListener('input', (e)=> setDp(parseFloat(e.target.value)||0));

      $('useMano').addEventListener('click', useManometer);

      setAtmosphereMode(); // initialize g/œÅ & KPIs
    }
    window.addEventListener('DOMContentLoaded', wire);
  </script>

  <!-- Feedback context -->
  <script>
    const FEEDBACK = { course: 'ME 310', sim: 'Eq. 3.16: Pitot-static (incompressible)' };
    document.addEventListener('DOMContentLoaded', () => {
      const url = new URL('../feedback.html', location.href);
      if (FEEDBACK.course) url.searchParams.set('course', FEEDBACK.course);
      if (FEEDBACK.sim)    url.searchParams.set('sim',    FEEDBACK.sim);
      document.querySelectorAll('a.feedback-link').forEach(a => {
        a.href = url.toString();
        try { localStorage.setItem('fb_ctx', JSON.stringify(FEEDBACK)); } catch {}
      });
    });
  </script>
</body>
</html>
